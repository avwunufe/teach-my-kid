<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="/assets/styles.css" type="text/css">
    <title>Feed</title>
</head>

<body>
    <%- include("../partials/nav.ejs") %>
    <div class="classWelcome">
        <h2>Welcome to class <%= `${user.FirstName} ${user.LastName}!`  %>
        </h2>
        <img src="" alt="">
        <h3><%= `${ myClass.ClassName }` %></h3>
        <h4><%= ` ${ myClass.Session }` %></h4>
        
        <h4>This class code: <%= ` ${ myClass.Code }` %> </h4>
    </div>
    <p style="display: none;" id="userId"><%= user._id%></p>
    <p style="display: none;" id="classId"><%= myClass._id%></p>
    <p style="display: none;" id="fullName"><%= `${user.FirstName} ${user.LastName}` %></p>
    <form id="feedForm">
        <div>
            <div><textarea class="feedForm" name="" id="newPost" cols="30" rows="5"
                    placeholder="Share something with the class"></textarea>
            </div>
            <input type="submit" value="Post" class="normalBtn joinBtn">
        </div>
    </form>
    <% if(feedPosts.length > 0) { %>
    <% feedPosts.forEach((post)=>{ %>
        <div class="modalBtn" >
            <h2><%=`${post.Body}`%></h2>
            <p><strong><%= `${post.Comments.length} comments`%></strong></p>
        </div>
    
        <div id="modalOne" class="modal">
        <div class="modal-content">
        <span class="closeBtn" id="closeBtnOne">&times;</span>
    <div class="postdatadiv" data-postId="<%= post._id %>">
            <h2><%= `${post.Body}`%></h2>
            <p><strong><%= `${post.Comments.length} comments`%></strong></p>
            <br>
    </div>
    <div>
        <% post.Comments.forEach((comment)=>{ %>

        <div>
            <h4><%= `${comment.Body}`%></h4>
            <h5><%= `${comment.FullName}`%></h5>
        </div>

        <br>
        <% }) %>
        <form class="commentForm">
            <input type="text" name="comments" class="feedComment" placeholder="Write a comment">
            <input type="submit" value="Post" class="normalBtn">
        </form>
    </div>
</div>
</div>
    <% }) %>
    <% } else { %>

    <h3> Nothing in feed yet..</h3>

    <% } %>

    <script src="/jquery-3.4.1.js"></script>
    <script src="/feed.js"></script>
    <script src="/general.js"></script>
</body>

</html>